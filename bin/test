if(options.update){
  const [id, task] = options.update
  let date = new Date().toUTCString()  
  fs.readFile("tasks.json", (error, data) => {
        if(error){
            console.error(error)
            throw err
        }
        const tasks = JSON.parse(data)
        for(let i = 0; i < tasks.length; i++){
          if(tasks[i].id === +id){
            tasks[i].name = task
            tasks[i].updatedAt = date
          } 
        }
          data = JSON.stringify(tasks)
          fs.writeFile('tasks.json', data, err => {
              // error checking
              if(err) throw err;
          }); 

    })
  
  
}

if(options.delete){
  let index = Number(options.delete) - 1
  fs.readFile("tasks.json", (error, data) => {
        if(error){
            console.error(error)
            throw err
        }
        
        const tasks = JSON.parse(data)

        for(let i = 0; i < tasks.length; i++){
          if(tasks[i].id === Number(options.delete)){
             tasks.splice(index, 1)
          }
        }
          data = JSON.stringify(tasks)
          fs.writeFile('tasks.json', data, err => {
              // error checking
              if(err) throw err;
          }); 

    })
  
}

if(options.list){
  console.log(options.list)
    fs.readFile("tasks.json", (error, data) => {
        if(error){
            console.error(error)
            throw err
        }
        const tasks = JSON.parse(data)
        if(options.list){
        console.log("List of Tasks")
        console.log("-----")
        for(let i = 0; i < tasks.length; i++){
          console.log(tasks[i].name)
        }
        }
  })
}


